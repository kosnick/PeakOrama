const PF_WASMVERSION="4.6.6";var PeakFinder=PeakFinder||{};PeakFinder.PanoramaPanel=function(e=null){this.options=e,this.settings=new PeakFinder.Settings(this),this.viewpoint=new PeakFinder.Viewpoint(this),this.astro=new PeakFinder.Astro(this),this.telescope=new PeakFinder.Telescope(this),this.canvasid="canvas",this.baseurl="https://www.peakfinder.org",this.locale="en",this.bgcolor="#ffffff",e&&(e.canvasid&&(this.canvasid=e.canvasid),e.baseurl&&(this.baseurl=e.baseurl),e.locale&&(this.locale=e.locale),e.bgcolor&&(this.bgcolor=e.bgcolor))},PeakFinder.PanoramaPanel.prototype.asleep=function(e){return e>0?new Promise((t=>{setTimeout(t,1e3*e)})):null},PeakFinder.PanoramaPanel.prototype.registerCommandsCallback=function(e){this.commands=e},PeakFinder.PanoramaPanel.prototype.init=function(e){if(!PeakFinder.utils.caniuse())return void console.log("this browser does not support loading the PeakFinder.PanoramaPanel.");console.log("env: 4.6.6");let t=document.createElement("script");t.setAttribute("src",this.baseurl+"/wasm/peakfinder.4.6.6.js"),t.setAttribute("async",""),t.setAttribute("defer",""),t.onload=()=>{var t=this,n={query:window.location.search,style:this.options.style,locale:this.locale,touch:PeakFinder.utils.isTouchDevice(),debug:this.options.debug,canvasid:t.canvasid,bgcolor:t.bgcolor},i=document.getElementById(t.canvasid);window.pfModule({canvas:i,arguments:[JSON.stringify(n)],INITIAL_MEMORY:33554432,onRuntimeInitialized:function(){const e=document.getElementById(t.canvasid+"progress");null!=e&&(e.style.display="none")},locateFile:function(e,n){return e.endsWith("4.6.6.wasm")||e.endsWith("4.6.6.wasm.map")||e.endsWith("4.6.6.data")||e.endsWith("4.6.6.worker.js")?t.baseurl+"/wasm/"+e:"../"+e},monitorRunDependencies:function(e){}}).then((n=>{t.wasm=n,window.pfHandleCommand=function(e){t.commands&&t.commands(e)},e&&e()}))},document.head.appendChild(t)},PeakFinder.PanoramaPanel.prototype.asyncinit=async function(){return new Promise(((e,t)=>{this.init((function(){e()}))}))},PeakFinder.PanoramaPanel.prototype.loadViewpoint=function(e,t,n=""){this.wasm.cwrap("startLoadingViewpoint","",["number","number","string"])(e,t,n)},PeakFinder.PanoramaPanel.prototype.azimut=function(e,t){return void 0===e?this.wasm._getAzimut():(this.wasm._setAzimut(e,void 0===t?0:t),this.asleep(t))},PeakFinder.PanoramaPanel.prototype.altitude=function(e,t){return void 0===e?this.wasm._getAltitude():(this.wasm._setAltitude(e,void 0===t?0:t),this.asleep(t))},PeakFinder.PanoramaPanel.prototype.fieldofview=function(e,t){return void 0===e?this.wasm._getFieldOfView():(this.wasm._setFieldOfView(e,void 0===t?0:t),this.asleep(t))},PeakFinder.PanoramaPanel.prototype.elevationOffset=function(e,t){return void 0===e?this.wasm._getElevationOffset():(this.wasm._setElevationOffset(e,void 0===t?0:t),this.asleep(t))},PeakFinder.Settings=function(e){this.panel=e},PeakFinder.Settings.prototype.theme=function(e){return void 0===e?this.panel.wasm._getTheme():(this.panel.wasm._setTheme(e),this)},PeakFinder.Settings.prototype.distanceUnit=function(e){return void 0===e?this.panel.wasm._getDistanceUnit():(this.panel.wasm._setDistanceUnit(e),this)},PeakFinder.Settings.prototype.coordsFormat=function(e){return void 0===e?this.panel.wasm._getCoordsFormat():(this.panel.wasm._setCoordsFormat(e),this)},PeakFinder.Settings.prototype.projection=function(e){return void 0===e?this.panel.wasm._getProjection():(this.panel.wasm._setProjection(e),this)},PeakFinder.Settings.prototype.showSun=function(e){return void 0===e?this.panel.wasm._getShowSun():(this.panel.wasm._setShowSun(e),this)},PeakFinder.Settings.prototype.showMoon=function(e){return void 0===e?this.panel.wasm._getShowMoon():(this.panel.wasm._setShowMoon(e),this)},PeakFinder.Settings.prototype.showGrid=function(e){return void 0===e?this.panel.wasm._getShowGrid():(this.panel.wasm._setShowGrid(e),this)},PeakFinder.Settings.prototype.visibilityRange=function(e){return void 0===e?this.panel.wasm._getVisibilityRange():(this.panel.wasm._setVisibilityRange(e),this)},PeakFinder.Settings.prototype.minimalElevation=function(e){return void 0===e?this.panel.wasm._getMinimalElevation():(this.panel.wasm._setMinimalElevation(e),this)},PeakFinder.Viewpoint=function(e){this.panel=e},PeakFinder.Viewpoint.prototype.name=function(){return this.panel.wasm.cwrap("getViewpointName","string")()},PeakFinder.Viewpoint.prototype.coordsDecimal=function(){return this.panel.wasm.cwrap("getViewpointCoordsDecimal","string")()},PeakFinder.Viewpoint.prototype.coordsDegree=function(){return this.panel.wasm.cwrap("getViewpointCoordsDegree","string")()},PeakFinder.Viewpoint.prototype.elevation=function(){return this.panel.wasm.cwrap("getViewpointElevation","number")()},PeakFinder.Astro=function(e){this.panel=e},PeakFinder.Astro.prototype.currentDateTime=function(e,t,n,i,o){return this.panel.wasm.cwrap("setAstroDateTime","",["number","number","number","number","number"])(e,t,n,i,o)},PeakFinder.Astro.prototype.currentDateTimeNow=function(){return this.panel.wasm.cwrap("setAstroDateTime","")()},PeakFinder.Astro.prototype.sunTimes=function(){return this.panel.wasm.cwrap("getAstroSunTimes","string")()},PeakFinder.Astro.prototype.moonTimes=function(){return this.panel.wasm.cwrap("getAstroMoonTimes","string")()},PeakFinder.Telescope=function(e){this.panel=e},PeakFinder.Telescope.prototype.show=function(){this.panel.wasm._showBinoculars()},PeakFinder.Telescope.prototype.hide=function(){this.panel.wasm._hideBinoculars()},PeakFinder.Telescope.prototype.centerAzimut=function(){return this.panel.wasm._getBinocularsCenterAzimut()},PeakFinder.Telescope.prototype.centerAltitude=function(){return this.panel.wasm._getBinocularsCenterAltitude()},PeakFinder.Telescope.prototype.centerDistance=function(){return this.panel.wasm._getBinocularsCenterDistance()},PeakFinder.Telescope.prototype.centerElevation=function(){return this.panel.wasm._getBinocularsCenterElevation()},PeakFinder.utils={caniuse:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1},isTouchDevice:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},sleep:function(e){return new Promise((t=>{setTimeout(t,1e3*e)}))}};
